<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Combine bootstrap estimates with non-bootstrap estimates and parameter key — define_boot_table • pmparams</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Combine bootstrap estimates with non-bootstrap estimates and parameter key — define_boot_table"><meta property="og:description" content="Combines boot strap estimates and non boot strap estimates with information in parameter key. Performs
some formatting of this combined data.frame.
There are two main steps of this function:
Run bbr::param_estimates_compare to extract summary quantiles, the 5th, 50th, and 95th, of the
bootstrap estimates for each model parameter.


Some parameter_names have punctuation such as OMEGA(1,1). A new column is
added without punctuation, such as OMEGA11.
Following this, parameter details from the parameter key are joined to the boot strap parameter estimates.
A dplyr::inner_join is used so that only parameters in the model output are kept
in the table. This was done so that, if your base and final model used the same structural
THETAs and random parameters, the same parameter key could be used for both.
This join adds the following columns: abb (abbreviation), desc (parameter description),
panel, trans (transformation).
Reformat non-bootstrap estimates and left join onto combined bootstrap estimates and parameter key data.frame.
Expected input is a data.frame with parameter estimates, with the columns:
parameter_names, estimate.


With this information provided, a check is performed to determine whether parameters
with special transformation rules were defined correctly. In addition, a series of
TRUE/FALSE columns that will be used by subsequent functions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pmparams</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ghe.metrumrg.com/software-incubator/pmparams" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combine bootstrap estimates with non-bootstrap estimates and parameter key</h1>
    
    <div class="hidden name"><code>define_boot_table.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Combines boot strap estimates and non boot strap estimates with information in parameter key. Performs
some formatting of this combined data.frame.
There are two main steps of this function:</p><ol><li><p>Run <code><a href="https://rdrr.io/pkg/bbr/man/param_estimates_compare.html" class="external-link">bbr::param_estimates_compare</a></code> to extract summary quantiles, the 5th, 50th, and 95th, of the
bootstrap estimates for each model parameter.</p></li>
</ol><p>Some <code>parameter_names</code> have punctuation such as <code>OMEGA(1,1)</code>. A new column is
added without punctuation, such as <code>OMEGA11</code>.</p>
<p>Following this, parameter details from the parameter key are joined to the boot strap parameter estimates.
A <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::inner_join</a></code> is used so that only parameters in the model output are kept
in the table. This was done so that, if your base and final model used the same structural
THETAs and random parameters, the same parameter key could be used for both.</p>
<p>This join adds the following columns: <code>abb</code> (abbreviation), <code>desc</code> (parameter description),
<code>panel</code>, <code>trans</code> (transformation).</p><ol><li><p>Reformat non-bootstrap estimates and left join onto combined bootstrap estimates and parameter key data.frame.
Expected input is a data.frame with parameter estimates, with the columns:
<code>parameter_names</code>, <code>estimate</code>.</p></li>
</ol><p>With this information provided, a check is performed to determine whether parameters
with special transformation rules were defined correctly. In addition, a series of
TRUE/FALSE columns that will be used by subsequent functions.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">define_boot_table</span><span class="op">(</span><span class="va">.boot_estimates</span>, <span class="va">.nonboot_estimates</span>, <span class="va">.key</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.boot_estimates</dt>
<dd><p>parameter boot estimates- either path to file or data.frame</p></dd>


<dt>.nonboot_estimates</dt>
<dd><p>non-bootstrap final model - either path to file or bbr model_summary</p></dd>


<dt>.key</dt>
<dd><p>parameter key- either path to file or data.frame</p></dd>

</dl></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="param_key.html">param_key</a>: Parameter key requirements</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">boot_paramEst</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"model/nonmem/boot/data/boot-106.csv"</span>,</span></span>
<span class="r-in"><span>                                 package <span class="op">=</span> <span class="st">"pmparams"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nonboot_paramEst</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"model/nonmem/nonboot_param_est.csv"</span>,</span></span>
<span class="r-in"><span>                                    package <span class="op">=</span> <span class="st">"pmparams"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">paramKey</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"model/nonmem/pk-parameter-key-new.yaml"</span>, package <span class="op">=</span> <span class="st">"pmparams"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">define_boot_table</span><span class="op">(</span>.boot_estimates <span class="op">=</span> <span class="va">boot_paramEst</span>,</span></span>
<span class="r-in"><span>               .nonboot_estimates <span class="op">=</span> <span class="va">nonboot_paramEst</span>,</span></span>
<span class="r-in"><span>               .key <span class="op">=</span> <span class="va">paramKey</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Parameter table yaml path provided: /opt/rpkgs/4.1/pmparams/model/nonmem/pk-parameter-key-new.yaml"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    parameter_names    estimate       lower       upper    name          abb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           THETA1  0.44880350  1.38806751  1.78221206  THETA1     KA (1/h)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           THETA2  4.11949000 58.28377484 65.05317419  THETA2     V2/F (L)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           THETA3  1.17220500  3.06673660  3.41684975  THETA3   CL/F (L/h)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           THETA4  4.20983500 64.99289784 69.82682512  THETA4     V3/F (L)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           THETA5  1.28442500  3.37292139  3.86409016  THETA5    Q/F (L/h)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           THETA6  0.48368700  0.40819383  0.55820400  THETA6  CL/F ~ eGFR</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           THETA7 -0.03861535 -0.16724268  0.08782413  THETA7   CL/F ~ Age</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           THETA8  0.42044750  0.29365133  0.58652035  THETA8   CL/F ~ ALB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       SIGMA.1.1.  0.03996855  0.03760094  0.04238123 SIGMA11 Proportional</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      OMEGA.1.1.  0.21791200  0.12965965  0.33063635 OMEGA11       IIV-KA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      OMEGA.2.1.  0.06564225  0.03282125  0.10749465 OMEGA21      V2/F-KA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      OMEGA.2.2.  0.08210580  0.06432011  0.10123122 OMEGA22     IIV-V2/F</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      OMEGA.3.1.  0.12131700  0.08049071  0.17341253 OMEGA31      CL/F-KA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      OMEGA.3.2.  0.06963290  0.05252801  0.08823306 OMEGA32    CL/F-V2/F</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      OMEGA.3.3.  0.11213300  0.08956925  0.14029418 OMEGA33     IIV-CL/F</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     desc  panel       trans fixed       value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   First order absorption rate constant struct    logTrans FALSE  1.56643682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                Apparent central volume struct    logTrans FALSE 61.52785506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                     Apparent clearance struct    logTrans FALSE  3.22910497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4             Apparent peripheral volume struct    logTrans FALSE 67.34542690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Apparent intercompartmental clearance struct    logTrans FALSE  3.61259012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                    eGFR effect on CL/F    cov        none FALSE  0.48368700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                     Age effect on CL/F    cov        none FALSE -0.03861535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           Serum albumin effect on CL/F    cov        none FALSE  0.42044750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                               Variance     RV     propErr    NA  0.03996855</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                Variance of absorption    IIV lognormalOm    NA  0.21791200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11               Covariance of V2/F - KA    IIV        none    NA  0.06564225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12            Variance of central volume    IIV lognormalOm    NA  0.08210580</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               Covariance of CL/F - KA    IIV        none    NA  0.12131700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14             Covariance of CL/F - V2/F    IIV        none    NA  0.06963290</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                 Variance of clearance    IIV lognormalOm    NA  0.11213300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    transTHETA    TH    OM     S   LOG LOGIT lognormO   Osd logitOsd propErr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          NA  TRUE FALSE FALSE  TRUE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA  TRUE FALSE FALSE  TRUE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          NA  TRUE FALSE FALSE  TRUE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          NA  TRUE FALSE FALSE  TRUE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          NA  TRUE FALSE FALSE  TRUE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          NA  TRUE FALSE FALSE FALSE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7          NA  TRUE FALSE FALSE FALSE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8          NA  TRUE FALSE FALSE FALSE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9          NA FALSE FALSE  TRUE FALSE FALSE    FALSE FALSE    FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10         NA FALSE  TRUE FALSE FALSE FALSE     TRUE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         NA FALSE  TRUE FALSE FALSE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12         NA FALSE  TRUE FALSE FALSE FALSE     TRUE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13         NA FALSE  TRUE FALSE FALSE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14         NA FALSE  TRUE FALSE FALSE FALSE    FALSE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15         NA FALSE  TRUE FALSE FALSE FALSE     TRUE FALSE    FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    addErr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  FALSE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Seth Green, Katherine Kay, Michael McDermott, Grace O’Brien.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

