<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Combine bootstrap estimates with parameter key — define_boot_table • pmparams</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Combine bootstrap estimates with parameter key — define_boot_table"><meta property="og:description" content="Combines bootstrap estimates with information in parameter key and performs
some additional formatting."><meta property="og:image" content="https://metrumresearchgroup.github.io/pmparams/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pmparams</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting-started.html">Getting Started with pmparams</a>
    </li>
    <li>
      <a href="../articles/making-bootstrap-parameter-tables.html">Making Bootstrap Parameter Tables</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/metrumresearchgroup/pmparams" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combine bootstrap estimates with parameter key</h1>
    <small class="dont-index">Source: <a href="https://github.com/metrumresearchgroup/pmparams/blob/HEAD/R/define_boot_table.R" class="external-link"><code>R/define_boot_table.R</code></a></small>
    <div class="hidden name"><code>define_boot_table.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Combines bootstrap estimates with information in parameter key and performs
some additional formatting.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">define_boot_table</span><span class="op">(</span></span>
<span>  <span class="va">.boot_estimates</span>,</span>
<span>  <span class="va">.key</span>,</span>
<span>  .ci <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  .na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .nonboot_estimates <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--boot-estimates">.boot_estimates<a class="anchor" aria-label="anchor" href="#arg--boot-estimates"></a></dt>
<dd><p>One of the following:</p><ul><li><p>Output from <code><a href="https://metrumresearchgroup.github.io/bbr/reference/summarize_bootstrap.html" class="external-link">bbr::bootstrap_estimates()</a></code> or a wide data frame denoting the
parameter estimates for each run. See details.</p></li>
<li><p>A file path to a csv containing the above dataset.</p></li>
</ul></dd>


<dt id="arg--key">.key<a class="anchor" aria-label="anchor" href="#arg--key"></a></dt>
<dd><p>path to parameter key or data.frame of parameter key. Described
in more detail in <code><a href="param_key.html">param_key</a></code></p></dd>


<dt id="arg--ci">.ci<a class="anchor" aria-label="anchor" href="#arg--ci"></a></dt>
<dd><p>the confidence interval. A value from 1 to 100 denoting the percent
confidence interval, or <code>"iqr"</code> (interquartile range). Default is <code>95</code>.</p></dd>


<dt id="arg--na-rm">.na.rm<a class="anchor" aria-label="anchor" href="#arg--na-rm"></a></dt>
<dd><p>logical (T/F). If <code>TRUE</code>, any <code>NA</code> and <code>NaN</code>'s are removed
before the quantiles are computed. Passed to <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">stats::quantile()</a></code>.</p></dd>


<dt id="arg--nonboot-estimates">.nonboot_estimates<a class="anchor" aria-label="anchor" href="#arg--nonboot-estimates"></a></dt>
<dd><p>Deprecated. Parameter estimates are now joined later
in the workflow.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Below is the expected format of <code>.boot_estimates</code> if a data frame is provided:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>run   THETA1 THETA2 THETA3 THETA4 THETA5 THETA6   THETA7 THETA8</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="dv">001</span>    <span class="fl">0.494</span>   <span class="fl">4.19</span>   <span class="fl">1.20</span>   <span class="fl">4.20</span>   <span class="fl">1.24</span>  <span class="fl">0.488</span> <span class="sc">-</span><span class="fl">0.0615</span>   <span class="fl">0.377</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="dv">002</span>    <span class="fl">0.405</span>   <span class="fl">4.07</span>   <span class="fl">1.14</span>   <span class="fl">4.23</span>   <span class="fl">1.32</span>  <span class="fl">0.536</span> <span class="sc">-</span><span class="fl">0.103</span>    <span class="fl">0.517</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="dv">003</span>    <span class="fl">0.500</span>   <span class="fl">4.09</span>   <span class="fl">1.15</span>   <span class="fl">4.21</span>   <span class="fl">1.27</span>  <span class="fl">0.413</span> <span class="sc">-</span><span class="fl">0.0752</span>   <span class="fl">0.523</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="dv">004</span>    <span class="fl">0.578</span>   <span class="fl">4.16</span>   <span class="fl">1.20</span>   <span class="fl">4.18</span>   <span class="fl">1.30</span>  <span class="fl">0.518</span> <span class="sc">-</span><span class="fl">0.0502</span>   <span class="fl">0.418</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="dv">005</span>    <span class="fl">0.499</span>   <span class="fl">4.14</span>   <span class="fl">1.16</span>   <span class="fl">4.25</span>   <span class="fl">1.22</span>  <span class="fl">0.436</span> <span class="sc">-</span><span class="fl">0.0686</span>   <span class="fl">0.394</span></span></code></pre><p></p></div>
<p><strong>Notes:</strong></p><ul><li><p>Some parameter names may have punctuation (such as <code>OMEGA(1,1)</code>). A new
<code>name</code> column is automatically added that specifies the name without
punctuation (i.e. <code>OMEGA11</code>).</p></li>
<li><p>Parameter details from the parameter key are joined to the bootstrap parameter
estimates. A <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::inner_join</a></code> is used so that only parameters in the model
output are kept in the table. This was done so that, if your base and final
model used the same structural THETAs and random parameters, the same
parameter key could be used for both.</p><ul><li><p>This join adds the following columns: <code>abb</code> (abbreviation), <code>desc</code>
(parameter description), <code>panel</code>, <code>trans</code> (transformation).</p></li>
</ul></li>
<li><p>A final check is performed to determine whether parameters with special
transformation rules were defined correctly. In addition, a series of <code>TRUE</code>/
<code>FALSE</code> columns are added that will be used downstream.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="param_key.html">param_key()</a></code>, <code><a href="define_param_table.html">define_param_table()</a></code>, <code><a href="format_boot_table.html">format_boot_table()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"model/nonmem"</span>, package <span class="op">=</span> <span class="st">"pmparams"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">paramKey</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">model_dir</span>, <span class="st">"pk-parameter-key-new.yaml"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using a file path:</span></span></span>
<span class="r-in"><span><span class="va">boot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">model_dir</span>, <span class="st">"boot/data/boot-106.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">define_boot_table</span><span class="op">(</span></span></span>
<span class="r-in"><span> .boot_estimates <span class="op">=</span> <span class="va">boot_path</span>,</span></span>
<span class="r-in"><span> .key <span class="op">=</span> <span class="va">paramKey</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 15 × 23</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    parameter_names   lower   value   upper ci_level name    abb      desc  panel</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> THETA1           1.39    1.57    1.78         95 THETA1  KA (1/h) Firs… stru…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> THETA2          58.3    61.5    65.1          95 THETA2  V2/F (L) Appa… stru…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> THETA3           3.07    3.23    3.42         95 THETA3  CL/F (L… Appa… stru…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> THETA4          65.0    67.3    69.8          95 THETA4  V3/F (L) Appa… stru…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> THETA5           3.37    3.61    3.86         95 THETA5  Q/F (L/… Appa… stru…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> THETA6           0.408   0.484   0.558        95 THETA6  CL/F ~ … eGFR… cov  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> THETA7          -<span style="color: #BB0000;">0.167</span>  -<span style="color: #BB0000;">0.038</span><span style="color: #BB0000; text-decoration: underline;">6</span>  0.087<span style="text-decoration: underline;">8</span>       95 THETA7  CL/F ~ … Age … cov  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> THETA8           0.294   0.420   0.587        95 THETA8  CL/F ~ … Seru… cov  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> OMEGA(1,1)       0.130   0.218   0.331        95 OMEGA11 IIV-KA   Vari… IIV  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> OMEGA(2,2)       0.064<span style="text-decoration: underline;">3</span>  0.082<span style="text-decoration: underline;">1</span>  0.101        95 OMEGA22 IIV-V2/F Vari… IIV  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> OMEGA(3,3)       0.089<span style="text-decoration: underline;">6</span>  0.112   0.140        95 OMEGA33 IIV-CL/F Vari… IIV  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> OMEGA(2,1)       0.032<span style="text-decoration: underline;">8</span>  0.065<span style="text-decoration: underline;">6</span>  0.107        95 OMEGA21 V2/F-KA  Cova… IIV  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> OMEGA(3,1)       0.080<span style="text-decoration: underline;">5</span>  0.121   0.173        95 OMEGA31 CL/F-KA  Cova… IIV  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> OMEGA(3,2)       0.052<span style="text-decoration: underline;">5</span>  0.069<span style="text-decoration: underline;">6</span>  0.088<span style="text-decoration: underline;">2</span>       95 OMEGA32 CL/F-V2… Cova… IIV  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> SIGMA(1,1)       0.037<span style="text-decoration: underline;">6</span>  0.040<span style="text-decoration: underline;">0</span>  0.042<span style="text-decoration: underline;">4</span>       95 SIGMA11 Proport… Vari… RV   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 14 more variables: trans &lt;chr&gt;, transTHETA &lt;lgl&gt;, THETAERR &lt;lgl&gt;, TH &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   OM &lt;lgl&gt;, S &lt;lgl&gt;, LOG &lt;lgl&gt;, LOGIT &lt;lgl&gt;, lognormO &lt;lgl&gt;, Osd &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   logitOsd &lt;lgl&gt;, propErr &lt;lgl&gt;, addErr &lt;lgl&gt;, addErrLogDV &lt;lgl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using a `bbr` bootstrap model object:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">boot_run</span> <span class="op">&lt;-</span> <span class="fu">bbr</span><span class="fu">::</span><span class="fu"><a href="https://metrumresearchgroup.github.io/bbr/reference/read_model.html" class="external-link">read_model</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">model_dir</span>, <span class="st">"106-boot"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">define_boot_table</span><span class="op">(</span></span></span>
<span class="r-in"><span> .boot_estimates <span class="op">=</span> <span class="fu">bbr</span><span class="fu">::</span><span class="fu"><a href="https://metrumresearchgroup.github.io/bbr/reference/summarize_bootstrap.html" class="external-link">bootstrap_estimates</a></span><span class="op">(</span><span class="va">boot_run</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> .key <span class="op">=</span> <span class="va">paramKey</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Katherine Kay, Michael McDermott, Eric Anderson, Grace O’Brien, Kyle Barrett.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

