<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Combine bootstrap estimates with non-bootstrap estimates and parameter key — define_boot_table • pmparams</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Combine bootstrap estimates with non-bootstrap estimates and parameter key — define_boot_table"><meta property="og:description" content="Combines boot strap estimates and non boot strap estimates with information in parameter key. Performs
some formatting of this combined data.frame.
There are two main steps of this function:
1.Run bbr::param_estimates_compare to extract summary quantiles, the 5th, 50th, and 95th, of the
bootstrap estimates for each model parameter.
Some parameter_names have punctuation such as OMEGA(1,1). A new column is
added without punctuation, such as OMEGA11.
Following this, parameter details from the parameter key are joined to the boot strap parameter estimates.
A dplyr::inner_join is used so that only parameters in the model output are kept
in the table. This was done so that, if your base and final model used the same structural
THETAs and random parameters, the same parameter key could be used for both.
This join adds the following columns: abb (abbreviation), desc (parameter description),
panel, trans (transformation).


2.Reformat non-bootstrap estimates and left join onto combined bootstrap estimates and parameter key data.frame.
Expected input is a data.frame with parameter estimates, with the columns:
parameter_names, estimate.
With this information provided, a check is performed to determine whether parameters
with special transformation rules were defined correctly. In addition, a series of
TRUE/FALSE columns that will be used by subsequent functions."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pmparams</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting-started.html">Getting Started with pmparams</a>
    </li>
    <li>
      <a href="../articles/making-bootstrap-parameter-tables.html">Making Bbootstrap Parameter Tables</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ghe.metrumrg.com/software-incubator/pmparams" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combine bootstrap estimates with non-bootstrap estimates and parameter key</h1>
    <small class="dont-index">Source: <a href="https://github.com/metrumresearchgroup/pmparams/blob/HEAD/R/define_boot_table.R" class="external-link"><code>R/define_boot_table.R</code></a></small>
    <div class="hidden name"><code>define_boot_table.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Combines boot strap estimates and non boot strap estimates with information in parameter key. Performs
some formatting of this combined data.frame.
There are two main steps of this function:</p>
<p>1.Run <code><a href="https://metrumresearchgroup.github.io/bbr/reference/param_estimates_compare.html" class="external-link">bbr::param_estimates_compare</a></code> to extract summary quantiles, the 5th, 50th, and 95th, of the
bootstrap estimates for each model parameter.</p><ul><li><p>Some <code>parameter_names</code> have punctuation such as <code>OMEGA(1,1)</code>. A new column is
added without punctuation, such as <code>OMEGA11</code>.</p></li>
<li><p>Following this, parameter details from the parameter key are joined to the boot strap parameter estimates.
A <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::inner_join</a></code> is used so that only parameters in the model output are kept
in the table. This was done so that, if your base and final model used the same structural
THETAs and random parameters, the same parameter key could be used for both.</p></li>
<li><p>This join adds the following columns: <code>abb</code> (abbreviation), <code>desc</code> (parameter description),
<code>panel</code>, <code>trans</code> (transformation).</p></li>
</ul><p>2.Reformat non-bootstrap estimates and left join onto combined bootstrap estimates and parameter key data.frame.
Expected input is a data.frame with parameter estimates, with the columns:
<code>parameter_names</code>, <code>estimate</code>.</p>
<p>With this information provided, a check is performed to determine whether parameters
with special transformation rules were defined correctly. In addition, a series of
TRUE/FALSE columns that will be used by subsequent functions.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">define_boot_table</span><span class="op">(</span><span class="va">.boot_estimates</span>, <span class="va">.nonboot_estimates</span>, <span class="va">.key</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.boot_estimates</dt>
<dd><p>parameter boot estimates- either path to file or data.frame</p></dd>


<dt>.nonboot_estimates</dt>
<dd><p>non-bootstrap final model - either path to file or bbr model_summary</p></dd>


<dt>.key</dt>
<dd><p>path to parameter key or data.frame of parameter key. Described in more detail in <code><a href="param_key.html">param_key</a></code></p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">boot_paramEst</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"model/nonmem/boot/data/boot-106.csv"</span>,</span></span>
<span class="r-in"><span>                                 package <span class="op">=</span> <span class="st">"pmparams"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nonboot_paramEst</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"model/nonmem/nonboot_param_est.csv"</span>,</span></span>
<span class="r-in"><span>                                    package <span class="op">=</span> <span class="st">"pmparams"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">paramKey</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"model/nonmem/pk-parameter-key-new.yaml"</span>, package <span class="op">=</span> <span class="st">"pmparams"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">define_boot_table</span><span class="op">(</span>.boot_estimates <span class="op">=</span> <span class="va">boot_paramEst</span>,</span></span>
<span class="r-in"><span>               .nonboot_estimates <span class="op">=</span> <span class="va">nonboot_paramEst</span>,</span></span>
<span class="r-in"><span>               .key <span class="op">=</span> <span class="va">paramKey</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Parameter table yaml path provided: /data/pmparams/inst/model/nonmem/pk-parameter-key-new.yaml"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 15 × 25</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    parameter_names estimate   lower   upper name   abb   desc  panel trans  nrow</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> THETA1            0.449   1.39    1.78   THETA1 KA (… Firs… stru… logT…     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> THETA2            4.12   58.3    65.1    THETA2 V2/F… Appa… stru… logT…     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> THETA3            1.17    3.07    3.42   THETA3 CL/F… Appa… stru… logT…     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> THETA4            4.21   65.0    69.8    THETA4 V3/F… Appa… stru… logT…     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> THETA5            1.28    3.37    3.86   THETA5 Q/F … Appa… stru… logT…     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> THETA6            0.484   0.408   0.558  THETA6 CL/F… eGFR… cov   none      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> THETA7           -<span style="color: #BB0000;">0.038</span><span style="color: #BB0000; text-decoration: underline;">6</span> -<span style="color: #BB0000;">0.167</span>   0.087<span style="text-decoration: underline;">8</span> THETA7 CL/F… Age … cov   none      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> THETA8            0.420   0.294   0.587  THETA8 CL/F… Seru… cov   none      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> OMEGA.1.1.        0.218   0.130   0.331  OMEGA… IIV-… Vari… IIV   logn…     9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> OMEGA.2.2.        0.082<span style="text-decoration: underline;">1</span>  0.064<span style="text-decoration: underline;">3</span>  0.101  OMEGA… IIV-… Vari… IIV   logn…    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> OMEGA.3.3.        0.112   0.089<span style="text-decoration: underline;">6</span>  0.140  OMEGA… IIV-… Vari… IIV   logn…    11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> OMEGA.2.1.        0.065<span style="text-decoration: underline;">6</span>  0.032<span style="text-decoration: underline;">8</span>  0.107  OMEGA… V2/F… Cova… IIV   none     12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> OMEGA.3.1.        0.121   0.080<span style="text-decoration: underline;">5</span>  0.173  OMEGA… CL/F… Cova… IIV   none     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> OMEGA.3.2.        0.069<span style="text-decoration: underline;">6</span>  0.052<span style="text-decoration: underline;">5</span>  0.088<span style="text-decoration: underline;">2</span> OMEGA… CL/F… Cova… IIV   none     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> SIGMA.1.1.        0.040<span style="text-decoration: underline;">0</span>  0.037<span style="text-decoration: underline;">6</span>  0.042<span style="text-decoration: underline;">4</span> SIGMA… Prop… Vari… RV    prop…    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 15 more variables: fixed &lt;lgl&gt;, value &lt;dbl&gt;, transTHETA &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   THETAERR &lt;lgl&gt;, TH &lt;lgl&gt;, OM &lt;lgl&gt;, S &lt;lgl&gt;, LOG &lt;lgl&gt;, LOGIT &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   lognormO &lt;lgl&gt;, Osd &lt;lgl&gt;, logitOsd &lt;lgl&gt;, propErr &lt;lgl&gt;, addErr &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   addErrLogDV &lt;lgl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Katherine Kay, Michael McDermott, Eric Anderson, Grace O’Brien.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

